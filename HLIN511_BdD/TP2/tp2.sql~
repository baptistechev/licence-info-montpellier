ALTER TABLE ABONNE ADD DAT_NAI NUMBER(4);
ALTER TABLE ABONNE ADD TYPE_AB VARCHAR(6) CHECK (TYPE_AB IN ('ADULTE','ENFANT'));
ALTER TABLE ABONNE ADD CAT_AB VARCHAR(20) CHECK (CAT_AB IN ('REGULIER', 'OCCASIONNEL', 'A PROBLEME', 'EXCLU'));

UPDATE ABONNE SET TYPE_AB = 'ADULTE' where AGE>17;
UPDATE ABONNE SET TYPE_AB = 'ENFANT' where AGE<18;

/*UPDATE ABONNE SET TYPE_AB = 'walawala' where num_ab = 901001;*/

ALTER TABLE ABONNE MODIFY TARIF NUMBER(5);

ALTER TABLE MOT_CLEF ADD MOT_PARENT VARCHAR(20);
UPDATE MOT_CLEF SET MOT_PARENT = 'ROOT' where MOT in ('MEDECINE','LITTERATURE','SCIENCES');
UPDATE MOT_CLEF SET MOT_PARENT = 'SCIENCES' where MOT in ('INFORMATIQUE');
UPDATE MOT_CLEF SET MOT_PARENT = 'INFORMATIQUE' where MOT in ('PROGRAMMATION','BASES DE DONNEES');
UPDATE MOT_CLEF SET MOT_PARENT = 'BASES DE DONNEES' where MOT in ('MODELE RELATIONNEL','MODELE ORIENTES OBJETS');
UPDATE MOT_CLEF SET MOT_PARENT = 'LITTERATURE' where MOT in ('ROMAN','POESIE','ESSAI','NOUVELLE');

CREATE TABLE ECRIT(
       ID_AUT NUMBER(5),
       ISBN VARCHAR(20),
       PRIMARY KEY (ID_AUT, ISBN)
);

CREATE TABLE AUTEUR(
       ID NUMBER(5) PRIMARY KEY,
       NOM VARCHAR(20),
       PRENOM VARCHAR(20),
       NATIONNALITE VARCHAR(20),
);

INSERT INTO AUTEUR VALUES (1,'HUGO','VICTOR','FRANCAIS');
INSERT INTO AUTEUR VALUES (2,'SARTRE','JP','FRANCAIS');
INSERT INTO AUTEUR VALUES (3,'ZOLA','EMILE','FRANCAIS');
INSERT INTO AUTEUR VALUES (4,'SHAKESPEAR','WILLIAM','ANGLAIS');

INSERT INTO ECRIT VALUES ('1_104_1050_2',1);
INSERT INTO ECRIT VALUES ('1_104_1050_2',2);
INSERT INTO ECRIT VALUES ('9_782070_36',3);

UPDATE ABONNE a1 SET DAT_NAI = (SELECT extract(year from sysdate)-age FROM DUAL,abonne a2 where a1.num_ab = a2.num_ab);

DELETE FROM AUTEUR;
DELETE FROM ECRIT;

INSERT INTO AUTEUR VALUES (101,'DUMAS','ALEXANDRE','FRANCAISE');
INSERT INTO AUTEUR VALUES (102,'SARTRE','JEAN-PAUL','FRANCAISE');
INSERT INTO AUTEUR VALUES (103,'GENEY','JEAN','FRANCAISE');
INSERT INTO AUTEUR VALUES (104,'VALLES','JULES','FRANCAISE');
INSERT INTO AUTEUR VALUES (105,'VILLON','FRANCOIS','FRANCAISE');
INSERT INTO AUTEUR VALUES (106,'ECO','UMBERTO','ITALIENNE');
INSERT INTO AUTEUR VALUES (107,'GARY','ROMAIN','FRANCAISE');
INSERT INTO AUTEUR VALUES (108,'ROCHEFORT','CHRISTIANE','FRANCAISE');
INSERT INTO AUTEUR VALUES (109,'STEINBECK','JOHN','AMERICAIN');
INSERT INTO AUTEUR VALUES (110,'HOFSTADTER','DOUGLAS','ALLEMAND');
INSERT INTO AUTEUR VALUES (111,'BOUZEGHOUB','MOKRANE','TUNISIENNE');
INSERT INTO AUTEUR VALUES (112,'GARDARIN','GEORGES','FRANCAISE');
INSERT INTO AUTEUR VALUES (113,'VALDURIEZ','PATRICK','FRANCAISE');
INSERT INTO AUTEUR VALUES (114,'ULLMAN','JEFFREY','AMERICAINE');
INSERT INTO AUTEUR VALUES (115,'DELOBEL','CLAUDE','FRANCAISE');
INSERT INTO AUTEUR VALUES (116,'DATE','JC','AMERICAINE');
INSERT INTO AUTEUR VALUES (117,'GELENBE','EROL','INDIENNE');
INSERT INTO AUTEUR VALUES (118,'FLORY','ANDRE','FRANCAISE');

INSERT INTO ECRIT VALUES (102,'1_104_1050_2');
INSERT INTO ECRIT VALUES (103,'0_15_270500_3');
INSERT INTO ECRIT VALUES (104,'0_85_4107_3');
INSERT INTO ECRIT VALUES (105,'0_112_3785_5');
INSERT INTO ECRIT VALUES (116,'0_201_14439_5');
INSERT INTO ECRIT VALUES (112,'0_12_27550_2');
INSERT INTO ECRIT VALUES (117,'0_12_27550_2');
INSERT INTO ECRIT VALUES (111,'0_8_7707_2');
INSERT INTO ECRIT VALUES (118,'0_8_7707_2');
INSERT INTO ECRIT VALUES (106,'1_22_1721_3');
INSERT INTO ECRIT VALUES (107,'3_505_13700_5');
INSERT INTO ECRIT VALUES (108,'0_18_47892_2');
INSERT INTO ECRIT VALUES (109,'9_782070_36');
INSERT INTO ECRIT VALUES (110,'2_7296_0040');
INSERT INTO ECRIT VALUES (111,'0_26_28079_6');
INSERT INTO ECRIT VALUES (112,'0_26_28079_6');
INSERT INTO ECRIT VALUES (113,'0_26_28079_6');
